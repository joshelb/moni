groups:
    - name: default
      rules:
      - alert: InstanceDown
        expr: up{job="cluster"} == 0
        for: 5m
        labels:
          customer: mistral
          severity: slack
        annotations:
          summary: "Instance down"
          description: "Something has been down for more than 5 minutes."
      - alert: CPU Steal
        expr: (avg by (instance) (rate(node_cpu_seconds_total{mode="steal"}[1m])) * 100) > 2
        for: 1m
        labels:
          customer: mistral
          severity: slack
        annotations:
          summary: CPU Steal is at {{ $value }} percent in {{ $labels.instance}}
          title: CPU Steal is at {{ $value }} percent in {{ $labels.instance}}
      - alert: NFS Mount missing
        for: 1m
        expr: absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-login-001:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-login-002:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-001:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-002:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-003:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-004:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-005:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-006:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-007:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-008:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-009:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-010:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-011:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-012:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-013:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-014:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-015:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-016:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-017:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-018:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-019:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-020:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-021:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-022:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-023:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-024:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-025:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-026:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-027:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-028:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-029:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-030:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-031:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-032:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-033:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-034:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-035:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-036:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-037:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-038:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-039:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-040:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-041:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-042:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-043:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-044:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-045:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-046:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-047:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-048:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-049:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-050:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-051:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-052:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-053:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-054:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-055:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-056:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-057:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-058:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-059:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-060:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-061:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-062:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-063:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-064:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-065:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-066:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-067:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-068:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-069:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-070:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-071:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-072:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-073:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-074:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-075:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-076:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-077:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-078:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-079:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-080:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-081:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-082:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-083:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-084:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-085:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-086:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-087:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-088:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-089:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-090:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-091:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-092:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-093:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-094:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-095:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-096:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-097:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-098:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-099:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-100:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-101:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-102:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-103:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-104:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-105:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-106:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-107:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-108:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-109:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-110:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-111:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-112:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-113:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-114:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-115:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-116:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-117:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-118:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-119:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-120:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-121:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-122:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-123:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-124:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-125:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-126:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-127:9100"})  or absent(node_filesystem_readonly{mountpoint="/mnt/vast", instance="fs-m-128:9100"})
        labels:
          customer: mistral
          severity: slack
        annotations:
          summary: NFS Mount missing  in {{ $labels.instance}}
          title: NFS Mount missing in {{ $labels.instance}}
      - alert: pkey Mismatch
        expr: max_over_time(infiniband_pkey{host=~"fs-m-.*"}[10s]) != 32770.0
        for: 1m
        labels:
          customer: mistral
          severity: slack
        annotations:
          summary: Pkey mismatch occured on {{ $labels.host}} on {{ $labels.interface }}
          title: Pkey mismatch occured on {{ $labels.host}} on {{ $labels.interface }}
      - alert: Second NFS Mount missing
        for: 1m
        expr: absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-login-001:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-login-002:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-001:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-002:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-003:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-004:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-005:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-006:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-007:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-008:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-009:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-010:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-011:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-012:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-013:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-014:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-015:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-016:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-017:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-018:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-019:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-020:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-021:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-022:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-023:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-024:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-025:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-026:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-027:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-028:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-029:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-030:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-031:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-032:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-033:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-034:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-035:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-036:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-037:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-038:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-039:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-040:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-041:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-042:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-043:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-044:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-045:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-046:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-047:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-048:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-049:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-050:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-051:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-052:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-053:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-054:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-055:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-056:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-057:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-058:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-059:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-060:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-061:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-062:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-063:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-064:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-065:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-066:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-067:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-068:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-069:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-070:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-071:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-072:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-073:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-074:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-075:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-076:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-077:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-078:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-079:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-080:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-081:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-082:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-083:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-084:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-085:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-086:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-087:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-088:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-089:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-090:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-091:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-092:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-093:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-094:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-095:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-096:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-097:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-098:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-099:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-100:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-101:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-102:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-103:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-104:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-105:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-106:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-107:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-108:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-109:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-110:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-111:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-112:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-113:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-114:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-115:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-116:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-117:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-118:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-119:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-120:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-121:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-122:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-123:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-124:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-125:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-126:9100"}) or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-127:9100"})  or absent(node_filesystem_readonly{mountpoint="/mnt/vast1", instance="fs-m-128:9100"})
        labels:
          customer: mistral
          severity: slack
        annotations:
          summary: SECOND NFS Mount missing  in {{ $labels.instance}}
          title: SECOND NFS Mount missing in {{ $labels.instance}}
      - alert: GPUs less than 8
        expr: fs_gpu_fallen_off_the_bus == 1
        for: 1m
        labels:
          customer: mistral
          severity: slack
        annotations:
          summary: GPU fallen of the bus at {{ $labels.host}}
          title: GPU fallen of the bus at {{ $labels.host}}

      - alert: Pending Remapped Rows
        expr: fs_gpu_pending_remapped_rows > 0
        for: 1m
        labels:
          customer: mistral
          severity: slack
        annotations:
          summary: Pending Remapped Rows in  {{ $labels.host}}
          title: Pending Remapped Rows in {{ $labels.host}}
      - alert: Nvidia-smi hanging
        expr: fs_nvidia_smi_hanged > 0
        for: 1m
        labels:
          customer: mistral
          severity: slack
        annotations:
          summary: nvidia-smi hanging in  {{ $labels.host}}
          title: nvidia-smi hanging  in {{ $labels.host}}
      - alert: CPU Throttling
        expr: fs_throttled_cpus > 0
        for: 1m
        labels:
          customer: mistral
          severity: slack
        annotations:
          summary: CPU is throttled in  {{ $labels.host}}
          title: CPU is throttled  in {{ $labels.host}}